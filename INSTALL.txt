$Id$

INSTALLATION NOTES
==================

To install CPSMailAccess you will need:

- a working Zope2.7.x + CPS 3.3.x (x>3)
- ZopeX3-3.0.0
- Five : http://codespeak.net/z3/five/ from the svn repo
- TrustedExecutables :
    http://www.dieter.handshake.de/pyprojects/zope/#TrustedExecutables
- TextIndexNG2 : http://www.zope.org/Members/ajung/TextIndexNG/
- rdflib (used by zemantic included in CPSMailAccess):
    http://rdflib.net/

Install the python package rdflib on your python installation, ie the one
Zope2.7 actually use with the usual command::

  $ python setup.py install

Please install ZopeX3-3.0.0 on your system (usually in /opt/ZopeX3-3.0.0) with
the python version you use for Zope2.7 and CPS, e.g.::

  $ ./configure --prefix /opt/ZopeX3-3.0.0 --with-python /usr/bin/python
  $ make
  $ make install
  $ make check

Put Five, TrustedExecutables, TextIndexNG2 and CPSMailAccess in your
$INSTANCE/Products and build TextIndexNG2::

  $ cd TextIndexNG2
  $ python setup.py build
  $ python setup.py install

Edit your $INSTANCE/etc/zope.conf to add the following path declarations::

  path /opt/ZopeX3-3.0.0/lib/python
  path $INSTANCE/Products/CPSMailAccess

Then you can restart Zope and add an external method in your CPS instance to
install CPSMailAccess::

   Id            : cpsmailaccess_installer
   Title         : whatever
   Module Name   : CPSMailAccess.install
   Function Name : install

And run it.

CONFIGURATION
=============

1. Enable the webmail

Go to your preferences, and change "webmail activated" to "yes". After you have validated
 this choice, you will see a new entry in your actions, called "My mails".

2. Configure your box

The first time you click on "My mails" will bring you to the configuration screen.
There you will need to provied a few informations:

to quickly set your box, you need to provide these parameters :

    host: the name of the imap mail server (for example: mail.mycompany.com)
    port: the port (default is 143 for IMAP, 993 for IMAP through SSL)
    SSL ?: if set to "1", tells the webmail to use SSL
           please read ssl_notes.txt

    Login: mail server login name
    Password : mail server password
    SMTP Host: smtp host
    SMTP Port: smtp port

submit your changes with the "submit" button

3. First synchronization

the first synchronization takes a big while: all mails from server are fetched to create a
browsing structure into zope. For big boxes (>20 0000 mails) it can take 15 minutes.
But this needs to be done juste once.

In the Administration panel, click on the "Synchronize the whole box" button. This will launch
the work. If your system is configured to work with zasync, you can start to work immediatly
with mails while the work is beeing done in the background. (this is explained in zasync_settings.txt)

When the box is synchronized, you will be taken in your INBOX and will be able to start to use
 the webmail.

4. Every day synchronization

For now on, everytime you will click on "My Mails" the box will get synchronized.
This should not last more than a few seconds. You can do a synchronization manually with
the "get messages" button.

5. How to use the webmail

please refer to the user manual





